# 버전 관리 가이드

## Semantic Versioning

TraceKit는 [Semantic Versioning 2.0.0](https://semver.org/)을 따릅니다.

```
MAJOR.MINOR.PATCH

예: 1.2.3
```

- MAJOR: 호환되지 않는 API 변경
- MINOR: 하위 호환되는 새 기능 추가
- PATCH: 하위 호환되는 버그 수정

## 릴리스 프로세스

### 1. 버전 결정

변경 사항을 확인하고 적절한 버전을 결정합니다:

```bash
# 패치 버전 (버그 수정): 1.0.0 → 1.0.1
# 마이너 버전 (새 기능): 1.0.1 → 1.1.0
# 메이저 버전 (Breaking Change): 1.1.0 → 2.0.0
```

### 2. Git 태그 생성

```bash
# 태그 생성
git tag -a 1.0.0 -m "Release 1.0.0"

# 태그 푸시
git push origin 1.0.0
```

### 3. 자동 배포

태그를 푸시하면 GitHub Actions가 자동으로:
- Swift 패키지 빌드 및 테스트 실행
- 변경 사항(Changelog) 자동 생성
- GitHub Release 생성
- 릴리스 노트 작성

### 4. 태그 확인

```bash
# 로컬 태그 목록
git tag

# 원격 태그 목록
git ls-remote --tags origin

# 특정 태그 확인
git show 1.0.0
```

## 릴리스 체크리스트

릴리스 전 확인 사항:

- [ ] 모든 테스트가 통과했는가?
- [ ] CI가 정상 동작하는가?
- [ ] CHANGELOG.md가 업데이트되었는가?
- [ ] README.md의 버전 정보가 최신인가?
- [ ] Breaking Change가 있다면 문서화되었는가?
- [ ] 마이그레이션 가이드가 필요한가?

## 예시: 1.0.0 릴리스

```bash
# 1. 최신 코드 확인
git checkout main
git pull origin main

# 2. 버전 태그 생성
git tag -a 1.0.0 -m "Release 1.0.0

주요 기능:
- Actor 기반 스레드 안전 로깅
- 다중 출력 대상 지원 (Console, OSLog, File, Sentry, Datadog, Firebase)
- 민감정보 자동 마스킹
- 크래시 로그 보존 (mmap 기반)
- 성능 추적 및 샘플링
"

# 3. 태그 푸시
git push origin 1.0.0

# 4. GitHub에서 자동 생성된 Release 확인
# https://github.com/jimmy/TraceKit/releases
```

## Breaking Change 관리

### Major 버전 업그레이드 시

1. CHANGELOG.md에 Breaking Change 섹션 추가
2. 마이그레이션 가이드 작성
3. Deprecated API 제거 전 경고 추가

예시 (v1 → v2):

```swift
// v1 (Deprecated)
@available(*, deprecated, message: "Use TraceKit.async.info() instead")
public static func info(_ message: String) {
    // ...
}

// v2 (New API)
public static func info(_ message: @autoclosure () -> String) async {
    // ...
}
```

## 참고 자료

- [Semantic Versioning](https://semver.org/)
- [Keep a Changelog](https://keepachangelog.com/)
- [GitHub Releases](https://docs.github.com/en/repositories/releasing-projects-on-github)
